var basic_params=["value","currency","content_name","content_type","content_ids","content_category","search_string","num_items","status","custom"],supported_params={ViewContent:{value:1,currency:1,content_name:1,content_type:1,content_ids:1,content_category:0,search_string:0,num_items:0,status:0,custom:1},Search:{value:1,currency:1,content_name:0,content_type:0,content_ids:1,content_category:1,search_string:1,num_items:0,status:0,custom:1},AddToCart:{value:1,currency:1,content_name:1,content_type:1,content_ids:1,content_category:0,search_string:0,num_items:0,status:0,custom:1},AddToWishlist:{value:1,currency:1,content_name:1,content_type:1,content_ids:1,content_category:1,search_string:0,num_items:0,status:0,custom:1},InitiateCheckout:{value:1,currency:1,content_name:1,content_type:1,content_ids:1,content_category:1,search_string:0,num_items:1,status:0,custom:1},AddPaymentInfo:{value:1,currency:1,content_name:0,content_type:1,content_ids:1,content_category:1,search_string:0,num_items:0,status:0,custom:1},Purchase:{value:2,currency:2,content_name:1,content_type:1,content_ids:1,content_category:0,search_string:0,num_items:1,status:0,custom:1},Lead:{value:1,currency:1,content_name:1,content_type:0,content_ids:0,content_category:1,search_string:0,num_items:0,status:0,custom:1},CompleteRegistration:{value:1,currency:1,content_name:1,content_type:0,content_ids:0,content_category:0,search_string:0,num_items:0,status:1,custom:1},custom:{value:0,currency:0,content_name:0,content_type:0,content_ids:0,content_category:0,search_string:0,num_items:0,status:0,custom:1}},time_delay_events=["ViewContent","custom"];jQuery(document).ready(function(a){function c(){a(".fca_delete_icon_confirm").off("click"),a(".fca_delete_icon_confirm").click(function(c){c.stopPropagation(),a(this).closest(".fca_deletable_item").hide("fast",function(){a(this).remove()})}),a(".fca_controls_icon_pixel_pause").off("click"),a(".fca_controls_icon_pixel_pause").click(function(c){c.stopPropagation();var t=a(this).closest(".fca_pc_pixel_row").find(".fca-pc-pixel-json"),e=JSON.parse(t.val());e.paused=!0,t.val(JSON.stringify(e)),a(this).closest("tr").addClass("paused"),a(this).hide().siblings(".fca_controls_icon_pixel_play").show()}),a(".fca_controls_icon_pixel_play").off("click"),a(".fca_controls_icon_pixel_play").click(function(c){c.stopPropagation();var t=a(this).closest(".fca_pc_pixel_row").find(".fca-pc-pixel-json"),e=JSON.parse(t.val());e.paused=!1,t.val(JSON.stringify(e)),a(this).closest("tr").removeClass("paused"),a(this).hide().siblings(".fca_controls_icon_pixel_pause").show()}),a(".fca_controls_icon_pause").off("click"),a(".fca_controls_icon_pause").click(function(c){c.stopPropagation();var t=a(this).closest(".fca_pc_event_row").find(".fca-pc-json"),e=JSON.parse(t.val());e.paused=!0,t.val(JSON.stringify(e)),a(this).closest("tr").addClass("paused"),a(this).hide().siblings(".fca_controls_icon_play").show()}),a(".fca_controls_icon_play").off("click"),a(".fca_controls_icon_play").click(function(c){c.stopPropagation();var t=a(this).closest(".fca_pc_event_row").find(".fca-pc-json"),e=JSON.parse(t.val());e.paused=!1,t.val(JSON.stringify(e)),a(this).closest("tr").removeClass("paused"),a(this).hide().siblings(".fca_controls_icon_pause").show()}),a(".fca_delete_icon_cancel").off("click"),a(".fca_delete_icon_cancel").click(function(c){c.stopPropagation(),a(this).hide(),a(this).siblings(".fca_delete_icon").hide(),a(this).siblings(".fca_delete_button").show()}),a(".fca_delete_button").off("click"),a(".fca_delete_button").click(function(c){c.stopPropagation(),a(this).hide().siblings(".fca_delete_icon").show()}),a(".fca_pc_pixel_row").off("click"),a(".fca_pc_pixel_row").click(function(c){a("#fca-pc-pixel-save").data("pixelID",a(this).attr("ID")),function(c){a("#fca-pc-modal-type-select").val(c.type),a("#fca-pc-modal-pixel-input").val(c.pixel),"Facebook Pixel"===c.type?(a("#fca-pc-capi-input-tr").hide(),a("#fca-pc-test-input-tr").hide(),a("#fca_pc_capi_info").hide()):(a("#fca-pc-capi-input-tr").show(),a("#fca-pc-test-input-tr").show(),a("#fca_pc_capi_info").show(),a("#fca-pc-modal-capi-input").val(c.capi),a("#fca-pc-modal-test-input").val(c.test))}(JSON.parse(a(this).find(".fca-pc-pixel-json").val())),a("#fca-pc-pixel-modal").show(),a("#fca-pc-overlay").show()}),a(".fca_pc_event_row").off("click"),a(".fca_pc_event_row").click(function(c){a("#fca-pc-event-save").data("eventID",a(this).attr("ID")),function(c){if(a("#fca_pc_custom_param_table").find(".fca_delete_icon_confirm").click(),supported_params.hasOwnProperty(c.event)){a("#fca-pc-modal-event-input").val(c.event).change();for(var t=0;t<basic_params.length;t++)c.parameters.hasOwnProperty(basic_params[t])?a(".fca-pc-"+basic_params[t]).val(c.parameters[basic_params[t]]):a(".fca-pc-"+basic_params[t]).val("");for(var e in c.parameters)-1===basic_params.indexOf(e)&&(a("#fca-pc-add-custom-param").click(),a(".fca-pc-input-parameter-name").last().val(e),a(".fca-pc-input-parameter-value").last().val(c.parameters[e]))}else{a("#fca-pc-modal-event-input").val("custom").change(),a(".fca-pc-event_name").val(c.event);for(var e in c.parameters)a("#fca-pc-add-custom-param").click(),a(".fca-pc-input-parameter-name").last().val(e),a(".fca-pc-input-parameter-value").last().val(c.parameters[e])}var i=c.hasOwnProperty("delay")?c.delay:0;a("#fca-pc-modal-delay-input").val(i);var p=c.hasOwnProperty("scroll")?c.scroll:0;switch(a("#fca-pc-modal-scroll-input").val(p),a("#fca-pc-modal-trigger-type-input").val(c.triggerType).change(),c.triggerType){case"post":a("#fca-pc-modal-post-trigger-input").children().each(function(){-1!==c.trigger.indexOf(a(this).val())?a(this).prop("selected",!0):a(this).prop("selected",!1)}).change();break;case"css":case"hover":a("#fca-pc-modal-css-trigger-input").val(c.trigger);break;case"url":a("#fca-pc-modal-url-trigger-input").val(c.trigger)}}(JSON.parse(a(this).find(".fca-pc-json").val())),a("#fca-pc-event-modal").show(),a("#fca-pc-overlay").show()}),a(".fca_delete_icon, .fca_controls_icon").not(".tooltipstered").tooltipster({contentAsHTML:!0,theme:["tooltipster-borderless","tooltipster-pixel-cat"]})}function t(t,e){if(fcaPcAdminData.debug&&console.log(t,e),t){if(t.attr("id",e.ID),t.find(".fca-pc-type-td").html(e.type),t.find(".fca-pc-pixel-td").html(e.pixel),t.find(".fca-pc-capi-td").html(e.capi),t.removeClass("paused"),t.find(".fca_controls_icon_pixel_play").hide().siblings(".fca_controls_icon_pixel_pause").show(),e.paused&&(t.addClass("paused"),t.find(".fca_controls_icon_pixel_pause").hide().siblings(".fca_controls_icon_pixel_play").show()),e.test){var i=t.find(".fca-pc-type-td");i.html(i.html()+" (test mode active)")}}else a("#fca-pc-pixels").append(fcaPcAdminData.pixelTemplate.replace("{{TYPE}}",e.type).replace("{{PIXEL}}",e.pixel).replace("{{CAPI}}",e.capi).replace("{{TEST}}",e.test).replace("{{ID}}",e.ID)),c();a("#"+e.ID).find(".fca-pc-pixel-json").val(JSON.stringify(e))}function e(t,e){fcaPcAdminData.debug&&console.log(t,e),t?(t.attr("id",e.ID),t.find(".fca-pc-event-td").html(e.event),t.find(".fca-pc-trigger-td").html(i(e.trigger)),t.removeClass("paused"),t.find(".fca_controls_icon_play").hide().siblings(".fca_controls_icon_pause").show(),e.paused&&(t.addClass("paused"),t.find(".fca_controls_icon_pause").hide().siblings(".fca_controls_icon_play").show())):(a("#fca-pc-events").append(fcaPcAdminData.eventTemplate.replace("{{EVENT}}",e.event).replace("{{TRIGGER}}",i(e.trigger)).replace("{{ID}}",e.ID)),c()),a("#"+e.ID).find(".fca-pc-json").val(JSON.stringify(e))}function i(c){if("string"==typeof c)return c;var t=[];return a("#fca-pc-modal-post-trigger-input option").filter(function(t,e){return-1!==c.indexOf(a(e).val())}).each(function(){t.push(a(this).html())}),t.join(", ")}function p(){var a=4294967296*Math.random()>>>0,c=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0;return n[255&a]+n[a>>8&255]+n[a>>16&255]+n[a>>24&255]+"-"+n[255&c]+n[c>>8&255]+"-"+n[c>>16&15|64]+n[c>>24&255]+"-"+n[63&t|128]+n[t>>8&255]+"-"+n[t>>16&255]+n[t>>24&255]+n[255&e]+n[e>>8&255]+n[e>>16&255]+n[e>>24&255]}fcaPcAdminData.debug&&console.log(fcaPcAdminData),fcaPcAdminData.premium?(0==fcaPcAdminData.woo_active&&a(".fca-pc-woo_extra_params, .fca-pc-woo_delay").prop("checked",!1).prop("disabled",!0).closest("tr").addClass("fca-pc-integration-disabled"),0==fcaPcAdminData.edd_active&&a(".fca-pc-edd_extra_params, .fca-pc-edd_delay").prop("checked",!1).prop("disabled",!0).closest("tr").addClass("fca-pc-integration-disabled")):(a(".fca-pc-user_parameters, .fca-pc-utm_support, #fca-pc-modal-delay-input, #fca-pc-modal-scroll-input, #fca-pc-add-custom-param, .fca-pc-woo_extra_params, .fca-pc-woo_delay, .fca-pc-edd_extra_params, .fca-pc-edd_delay, .fca-pc-advanced_matching, .fca-pc-amp_integration").prop("checked",!1).prop("disabled",!0).closest("tr").addClass("fca-pc-integration-disabled"),a("#mode-option-css, #mode-option-hover, #mode-option-url, #custom-event-option").each(function(){a(this).html(a(this).html()+" - Pro Only").prop("disabled",!0)})),a(".fca_pc_pixel_row").each(function(){t(a(this),JSON.parse(a(this).find(".fca-pc-pixel-json").val()))}),a(".fca_pc_event_row").each(function(){e(a(this),JSON.parse(a(this).find(".fca-pc-json").val()))}),a(".fca_pc_multiselect").select2(),a("#fca-pc-helptext, .fca_pc_error_tip").not(".tooltipstered").tooltipster({trigger:"custom",timer:6e3,maxWidth:350,theme:["tooltipster-borderless","tooltipster-pixel-cat"]}),a(".fca_pc_pro_tooltip, .fca_pc_tooltip, .fca_pc_event_tooltip, .fca_delete_icon, .fca_controls_icon, #fca_pc_new_pixel_id").not(".tooltipstered").tooltipster({contentAsHTML:!0,theme:["tooltipster-borderless","tooltipster-pixel-cat"]}),a("#fca-pc-modal-pixel-input").on("input",function(c){var t=a(this).val();/^\d+$/.test(t)||""===t||(a(this).val(""),a("#fca-pc-helptext").tooltipster("open"))}),a(".fca-pc-nav a").click(function(){a(".nav-tab-active").removeClass("nav-tab-active"),a(this).addClass("nav-tab-active"),a(".fca-pc-nav a").each(function(){a(a(this).data("target")).hide()}),a(a(this).data("target")).show(),a(this).blur()}),a(".fca-pc-nav a").first().click(),a(".fca_pc_integrations_table th").click(function(){a(this).next().find("input").click()}),a("#fca_pc_new_event").click(function(){a("#fca-pc-event-save").data("eventID",""),a(".fca-pc-content_name").val("{post_title}"),a(".fca-pc-content_type").val("product"),a(".fca-pc-content_ids").val("{post_id}"),a(".fca-pc-content_category").val("{post_category}"),a(".fca-pc-search_string").val(""),a(".fca-pc-num_items").val(""),a(".fca-pc-status").val(""),a(".fca-pc-value").val(""),a(".fca-pc-currency").val(""),a(".fca-pc-event_name").val(""),a("#fca-pc-modal-post-trigger-input").val("").change(),a("#fca-pc-modal-css-trigger-input").val(""),a("#fca-pc-modal-url-trigger-input").val(""),a("#fca-pc-modal-delay-input").val(0),a("#fca-pc-modal-scroll-input").val(0),a("#fca-pc-modal-event-input").val("ViewContent").change(),a("#fca-pc-event-modal").show(),a("#fca-pc-overlay").show()}),a("#fca_pc_new_pixel_id").click(function(){fcaPcAdminData.premium||a(".fca_pc_pixel_row").length<1?(a("#fca-pc-pixel-save").data("pixelID",""),a("#fca-pc-modal-type-select").val("Facebook Pixel").change(),a("#fca-pc-modal-pixel-input").val(""),a("#fca-pc-modal-capi-input").val(""),a("#fca-pc-modal-test-input").val(""),a("#fca-pc-capi-input-tr").hide(),a("#fca-pc-test-input-tr").hide(),a("#fca-pc-pixel-modal").show(),a("#fca-pc-overlay").show()):alert("To add multiple pixels, please upgrade to Pixel Cat Premium")}),a("#fca-pc-modal-type-select").change(function(){"Conversions API"===a(this).val()?(a("#fca-pc-capi-input-tr").show(),a("#fca-pc-test-input-tr").show(),a("#fca_pc_capi_info").show()):(a("#fca-pc-capi-input-tr").hide(),a("#fca-pc-test-input-tr").hide(),a("#fca_pc_capi_info").hide())}),a("#fca_pc_woo_toggle_link").click(function(){a("#fca-pc-event-modal").hide(),a(".fca_pc_tooltip").tooltipster("hide"),a("#fca-pc-overlay").hide(),a(".nav-tab")[2].click()}),a("#fca-pc-event-cancel").click(function(){a("#fca-pc-event-modal").hide(),a(".fca_pc_tooltip").tooltipster("hide"),a("#fca-pc-overlay").hide()}),a("#fca-pc-pixel-cancel").click(function(){a("#fca-pc-pixel-modal").hide(),a(".fca_pc_tooltip").tooltipster("hide"),a("#fca-pc-overlay").hide()}),a("#fca_pc_main_form").on("keypress keydown keyup",function(c){var t=a(c.target).hasClass("select2-search__field");if(27!=c.keyCode||t||a("#fca-pc-event-cancel").click(),13==c.keyCode&&!t)return c.preventDefault(),a("#fca-pc-event-modal").is(":visible")&&a("#fca-pc-event-save").click(),a("#fca-pc-pixel-modal").is(":visible")&&a("#fca-pc-pixel-save").click(),!1}),a("#fca-pc-pixel-save").click(function(){if(a("#fca-pc-modal-pixel-input").val())if(a("#fca-pc-modal-capi-input").val()||"Conversions API"!==a("#fca-pc-modal-type-select").val()){var c={};c.type=a("#fca-pc-modal-type-select").val(),c.pixel=a("#fca-pc-modal-pixel-input").val(),"Facebook Pixel"===c.type?(c.capi="",c.test=""):(c.capi=a("#fca-pc-modal-capi-input").val(),c.test=a("#fca-pc-modal-test-input").val()),a(this).data("pixelID")?(c.ID=a(this).data("pixelID"),c.paused=a("#"+c.ID).hasClass("paused"),t(a("#"+c.ID),c)):(c.paused=!1,c.ID=p(),t(!1,c)),a("#fca-pc-overlay").hide(),a("#fca-pc-pixel-modal").hide()}else alert("Conversions API Token is required for this pixel type");else alert("Please enter the Pixel ID")}),a("#fca-pc-event-save").click(function(){var c=!0;if(a(".fca_pc_tooltip").tooltipster("close"),a("#fca-pc-modal-post-trigger-input").val()||"post"!==a("#fca-pc-modal-trigger-type-input").val()||(a("#fca-pc-modal-post-trigger-input").closest("tr").find(".fca_pc_tooltip").tooltipster("show"),c=!1),a("#fca-pc-modal-css-trigger-input").val()||"css"!==a("#fca-pc-modal-trigger-type-input").val()||(a("#fca-pc-modal-css-trigger-input").closest("tr").find(".fca_pc_tooltip").tooltipster("show"),c=!1),a("#fca-pc-modal-url-trigger-input").val()||"url"!==a("#fca-pc-modal-trigger-type-input").val()||(a("#fca-pc-modal-url-trigger-input").closest("tr").find(".fca_pc_tooltip").tooltipster("show"),c=!1),a(".fca-required-param").each(function(){a(this).find("input").val()||(a("#fca-pc-show-param").click(),a(this).find(".fca_pc_tooltip").tooltipster("show"),c=!1)}),a(".fca-pc-event_name").val()||"custom"!==a("#fca-pc-modal-event-input").val()||(a(".fca-pc-event_name").closest("tr").find(".fca_pc_tooltip").tooltipster("show"),c=!1),!c)return!1;var t={};switch(t.triggerType=a("#fca-pc-modal-trigger-type-input").val(),t.triggerType){case"css":case"hover":t.trigger=a("#fca-pc-modal-css-trigger-input").val();break;case"post":t.trigger=a("#fca-pc-modal-post-trigger-input").val();break;case"url":t.trigger=a("#fca-pc-modal-url-trigger-input").val()}if(t.parameters={},"custom"===a("#fca-pc-modal-event-input").val())t.event=a(".fca-pc-event_name").val();else{t.event=a("#fca-pc-modal-event-input").val();for(var i=0;i<basic_params.length;i++){var o=basic_params[i];supported_params[t.event][o]>0&&""!=a(".fca-pc-"+o).val()&&(t.parameters[o]=a(".fca-pc-"+o).val())}}a(".fca-pc-input-parameter-name").each(function(c,e){var i=a(this).val(),p=a(this).parent("td").next().find(".fca-pc-input-parameter-value").val();i&&p&&(t.parameters[i]=p)}),t.delay=a("#fca-pc-modal-delay-input").val(),t.scroll=a("#fca-pc-modal-scroll-input").val(),t.apiAction="custom"===a("#fca-pc-modal-event-input").val()?"trackCustom":"track",a(this).data("eventID")?(t.ID=a(this).data("eventID"),t.paused=a("#"+t.ID).hasClass("paused"),e(a("#"+t.ID),t)):(t.ID=p(),e(!1,t)),a("#fca-pc-overlay").hide(),a("#fca-pc-event-modal").hide()}),a("#fca-pc-modal-event-input").change(function(){var c=a(this).val();a(".fca-active-param").removeClass("fca-active-param"),a(".fca-required-param").removeClass("fca-required-param"),a(".fca_pc_tooltip").tooltipster("hide"),a("#fca_pc_tooltip_viewcontent, #fca_pc_tooltip_lead").hide(),a(".fca-required-param-tooltip").hide();for(item in supported_params[c])supported_params[c][item]>0&&(a("#fca_pc_param_"+item).addClass("fca-active-param"),2===supported_params[c][item]&&(a("#fca_pc_param_"+item).addClass("fca-required-param"),a(".fca-required-param-tooltip").show(),a("#fca-pc-show-param").click()));a(".fca-pc-param-toggle").not(":visible").click(),"post"===a("#fca-pc-modal-trigger-type-input").val()?(a("#fca-pc-modal-delay-input, #fca-pc-modal-scroll-input").closest("tr").show(),a("#fca_pc_tooltip_viewcontent").show()):(a("#fca-pc-modal-delay-input, #fca-pc-modal-scroll-input").closest("tr").hide(),a("#fca_pc_tooltip_lead").show()),a("#fca_pc_param_custom").addClass("fca-active-param"),"custom"===c?a("#fca_pc_param_event_name").show():a("#fca_pc_param_event_name").hide()}),a(".fca-pc-param-toggle").click(function(){a(".fca-pc-param-row").hide(),"fca-pc-show-param"===a(this).attr("id")?(a("#fca-pc-show-param").hide(),a("#fca-pc-hide-param").show(),a("#fca-pc-param-help").show(),a(".fca-active-param").show()):(a("#fca-pc-hide-param").hide(),a("#fca-pc-show-param").show(),a("#fca-pc-param-help").hide())}),a(".fca-pc-woo_feed").change(function(){this.checked?a(".fca-pc-woo-feed-settings").not(".fca-pc-woo-advanced-feed-settings").show("fast"):a(".fca-pc-woo-feed-settings").hide("fast")}).change(),a(".fca-pc-feed-toggle").click(function(){a(".fca-pc-feed-toggle").hide(),"fca-pc-show-feed-settings"===a(this).attr("id")?(a("#fca-pc-show-feed-settings").hide(),a("#fca-pc-hide-feed-settings").show(),a(".fca-pc-woo-advanced-feed-settings").show()):(a("#fca-pc-show-feed-settings").show(),a("#fca-pc-hide-feed-settings").hide(),a(".fca-pc-woo-advanced-feed-settings").hide())}),a(".fca-pc-edd_feed").change(function(){this.checked?a(".fca-pc-edd-feed-settings").show("fast"):a(".fca-pc-edd-feed-settings").hide("fast")}).change(),fcaPcAdminData.premium&&a("#fca-pc-add-custom-param").click(function(){a("#fca_pc_custom_param_table").append(fcaPcPremiumData.customParamTemplate),c()}),a("#fca-pc-modal-trigger-type-input").change(function(){a(".fca_pc_multiselect").select2("close"),a("#fca-pc-post-input-tr, #fca-pc-css-input-tr, #fca-pc-url-input-tr").hide(),a("#fca-pc-modal-event-input").change(),a("#fca-pc-"+a(this).val()+"-input-tr").show(),"hover"===a(this).val()&&a("#fca-pc-css-input-tr").show()}).change(),c();var o=!0;a("input, select").on("input, change",function(){window.onbeforeunload=function(){return o}}),a("#fca_pc_save").click(function(){o=null}),a("#fca_pc_main_form, #fca-pc-marketing-metabox").show();for(var n=[],s=0;s<256;s++)n[s]=(s<16?"0":"")+s.toString(16)});