var response_content,isjQueryReady=!1,isGoogleChartsReady=!1,isInitialized=!1;function googleChartsLoadCallback(){isGoogleChartsReady=!0,init()}function init(){isjQueryReady&&isGoogleChartsReady&&!isInitialized&&(isInitialized=!0,jQuery(".chart-period").change(function(){var t=jQuery(".chart-period").val(),a=new Date;if("this_week"===t)a.setDate(a.getDate()-a.getDay()+1),jQuery(".chart-period-start").val(format_date(a)),a.setDate(a.getDate()+6),jQuery(".chart-period-end").val(format_date(a));else if("this_month"===t){var e=new Date(a.getFullYear(),a.getMonth(),1);jQuery(".chart-period-start").val(format_date(e));var n=new Date(a.getFullYear(),a.getMonth()+1,-1);jQuery(".chart-period-end").val(format_date(n))}}),jQuery(".chart-period-start, .chart-period-end").change(function(){jQuery(".chart-period").val("custom")}),jQuery(".chart-options").submit(function(t){return t.preventDefault(),showChart(jQuery(this).serialize()),!1}),jQuery(window).resize(function(){response_content&&response_content.data.chart.columns.length>1&&renderChart(response_content.data.chart)}),jQuery(".chart-period").change(),jQuery(".chart-options").submit())}function renderChart(t){var a=new google.visualization.DataTable;t.columns&&t.columns.forEach(function(t,e){a.addColumn(0===e?"string":"number",t)}),t.rows&&(a.addRows(Object.values(t.rows)),new google.visualization.NumberFormat({fractionDigits:2}).format(a,1));var e=jQuery("#chart-container").width(),n=jQuery(window).height()-jQuery("#chart-container").offset().top;200>n&&(n=200);var o={chart:{title:t.title?t.title:"",subtitle:t.subtitle?t.subtitle:""},width:e,height:n};new google.charts.Line(document.getElementById("chart-container")).draw(a,o)}function showChart(t){let a=jQuery(".woo_discount_loader");a.show(),jQuery("#info-container").find("#total-orders, #total-revenue, #discounted-amount, #total-free-shipping").html("-"),jQuery.post(ajaxurl,{action:"wdr_admin_statistics",method:"get_chart_data",params:t},function(t){a.hide(),t.success?t.data.chart.columns&&t.data.chart.columns.length>1?(response_content=t,renderChart(t.data.chart),jQuery("#info-container").show(),t.data.other&&(jQuery("#info-container #total-orders").html(t.data.other.total_orders),jQuery("#info-container #total-revenue").html(t.data.other.revenue),jQuery("#info-container #discounted-amount").html(t.data.other.discounted_amount),jQuery("#info-container #total-free-shipping").html(t.data.other.total_free_shipping))):(jQuery("#chart-container").html(wdr_data.localization_data.chart_data),jQuery("#info-container").hide()):jQuery("#chart-container").html(wdr_data.localization_data.chart_data)},"json")}function to2Digits(t){return t<10?"0"+t:t}function format_date(t){return[to2Digits(t.getFullYear()),to2Digits(t.getMonth()+1),to2Digits(t.getDate())].join("-")}google.charts.load("current",{packages:["line"]}),google.charts.setOnLoadCallback(googleChartsLoadCallback),jQuery(document).ready(function(){isjQueryReady=!0,jQuery(".chart-type").select2(),init()});