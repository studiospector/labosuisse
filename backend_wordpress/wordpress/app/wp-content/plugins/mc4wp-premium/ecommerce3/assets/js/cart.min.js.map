{"version":3,"file":"cart.min.js","sources":["ecommerce3/assets/js/cart.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nvar checkoutForm = document.querySelector('form.woocommerce-checkout, form[name=\"checkout\"]');\nvar previousEmailAddress = '';\nvar previousDataString;\nvar formSubmitted = false;\nvar ajaxurl = typeof mc4wp_ecommerce_cart !== \"undefined\" ? mc4wp_ecommerce_cart.ajax_url : woocommerce_params.ajax_url;\n\nfunction isEmailAddressValid(emailAddress) {\n  var regex = /\\S+@\\S+\\.\\S+/;\n  return typeof emailAddress === \"string\" && emailAddress !== '' && regex.test(emailAddress);\n}\n\nfunction getFieldValue(fieldName) {\n  var field = checkoutForm.querySelector(\"[name=\\\"\".concat(fieldName, \"\\\"]\"));\n\n  if (!field) {\n    return '';\n  }\n\n  return field.value.trim();\n}\n\nfunction sendFormData(async) {\n  var data = {\n    previous_billing_email: previousEmailAddress,\n    billing_email: getFieldValue('billing_email'),\n    billing_first_name: getFieldValue('billing_first_name'),\n    billing_last_name: getFieldValue('billing_last_name'),\n    billing_address_1: getFieldValue('billing_address_1'),\n    billing_address_2: getFieldValue('billing_address_2'),\n    billing_city: getFieldValue('billing_city'),\n    billing_state: getFieldValue('billing_state'),\n    billing_postcode: getFieldValue('billing_postcode'),\n    billing_country: getFieldValue('billing_country')\n  };\n  var dataString = JSON.stringify(data); // schedule cart update if email looks valid && data changed.\n\n  if (isEmailAddressValid(data.billing_email) && dataString !== previousDataString) {\n    var request = new XMLHttpRequest();\n    request.open('POST', ajaxurl + \"?action=mc4wp_ecommerce_schedule_cart\", async);\n    request.setRequestHeader('Content-Type', 'application/json');\n    request.send(dataString);\n    previousDataString = dataString;\n    previousEmailAddress = data.billing_email;\n  }\n}\n\nif (checkoutForm) {\n  checkoutForm.addEventListener('change', function () {\n    sendFormData(true);\n  });\n  checkoutForm.addEventListener('submit', function () {\n    formSubmitted = true;\n  }); // always send before unloading window, but not if form was submitted\n\n  window.addEventListener('beforeunload', function () {\n    if (!formSubmitted) {\n      sendFormData(false);\n    }\n  });\n}\n\n},{}]},{},[1]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","previousDataString","checkoutForm","document","querySelector","previousEmailAddress","formSubmitted","ajaxurl","mc4wp_ecommerce_cart","woocommerce_params","ajax_url","getFieldValue","fieldName","field","concat","value","trim","sendFormData","async","emailAddress","data","previous_billing_email","billing_email","billing_first_name","billing_last_name","billing_address_1","billing_address_2","billing_city","billing_state","billing_postcode","billing_country","dataString","JSON","stringify","test","request","XMLHttpRequest","open","setRequestHeader","send","addEventListener","window"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAkD,MAA1CK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,MAAaO,KAAK,mBAAmBF,EAAMG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,gBAGxe,IAEIK,EAFAC,EAAeC,SAASC,cAAc,oDACtCC,EAAuB,GAEvBC,GAAgB,EAChBC,GAA0C,oBAAzBC,qBAAuCA,qBAAgCC,oBAAXC,SAOjF,SAASC,EAAcC,GACjBC,EAAQX,EAAaE,cAAc,UAAWU,OAAOF,EAAW,OAEpE,OAAKC,EAIEA,EAAME,MAAMC,OAHV,GAMX,SAASC,EAAaC,GACpB,IAhB2BC,EAgBvBC,EAAO,CACTC,uBAAwBhB,EACxBiB,cAAeX,EAAc,iBAC7BY,mBAAoBZ,EAAc,sBAClCa,kBAAmBb,EAAc,qBACjCc,kBAAmBd,EAAc,qBACjCe,kBAAmBf,EAAc,qBACjCgB,aAAchB,EAAc,gBAC5BiB,cAAejB,EAAc,iBAC7BkB,iBAAkBlB,EAAc,oBAChCmB,gBAAiBnB,EAAc,oBAE7BoB,EAAaC,KAAKC,UAAUb,GA1BD,iBAFJD,EA8BHC,EAAKE,gBA5B+B,KAAjBH,GAD/B,eAC4De,KAAKf,IA4B9BY,IAAe9B,KACxDkC,EAAU,IAAIC,gBACVC,KAAK,OAAQ9B,EAAU,wCAAyCW,GACxEiB,EAAQG,iBAAiB,eAAgB,oBACzCH,EAAQI,KAAKR,GACb9B,EAAqB8B,EACrB1B,EAAuBe,EAAKE,eAI5BpB,IACFA,EAAasC,iBAAiB,SAAU,WACtCvB,GAAa,KAEff,EAAasC,iBAAiB,SAAU,WACtClC,GAAgB,IAGlBmC,OAAOD,iBAAiB,eAAgB,WACjClC,GACHW,GAAa,OAKjB,KAAK,GAAG,CAAC"}